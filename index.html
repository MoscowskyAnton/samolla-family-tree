<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Генеалогическое древо собак</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  .tree {
    position: relative;
    margin: 20px;
  }
  .parent {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 20px;
  }
  .dog {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: #f0f0f0;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
    text-align: center;
    padding-top: 10px;
    position: relative;
    font-size: 14px;
  }
  .dog img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 5px;
  }
  .male {
    border: 3px solid #3399ff;
  }
  .female {
    border: 3px solid #ff6699;
  }
  .litter {
    border-radius: 15px;
    border: 2px solid #999;
    padding: 10px;
    display: flex;
    gap: 20px;
    justify-content: center;
    width: max-content;
    margin: 0 auto;
  }
  svg {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
  }
</style>
</head>
<body>

<div class="tree" id="tree-container">
  <div class="parent" id="parents">
    <div class="dog male" id="father">
      <img src="https://placedog.net/60/60?id=1" alt="Отец" />
      <div>Отец</div>
      <div>м</div>
    </div>
    <div class="dog female" id="mother">
      <img src="https://placedog.net/60/60?id=2" alt="Мать" />
      <div>Мать</div>
      <div>ж</div>
    </div>
  </div>
  <div class="litter" id="litter">
    <div class="dog male">
      <img src="https://placedog.net/60/60?id=3" alt="Щенок 1" />
      <div>Щенок 1</div>
      <div>м</div>
    </div>
    <div class="dog female">
      <img src="https://placedog.net/60/60?id=4" alt="Щенок 2" />
      <div>Щенок 2</div>
      <div>ж</div>
    </div>
    <div class="dog male">
      <img src="https://placedog.net/60/60?id=5" alt="Щенок 3" />
      <div>Щенок 3</div>
      <div>м</div>
    </div>
  </div>
  <svg id="arrows"></svg>
</div>

<script>
  function drawArrows() {
    const svg = document.getElementById('arrows');
    const tree = document.getElementById('tree-container');
    svg.innerHTML = ''; // очистка перед рисованием
    svg.style.width = tree.offsetWidth + 'px';
    svg.style.height = tree.offsetHeight + 'px';

    const father = document.getElementById('father');
    const mother = document.getElementById('mother');
    const litter = document.getElementById('litter');

    // Получаем координаты центров кружков родителей
    const fatherRect = father.getBoundingClientRect();
    const motherRect = mother.getBoundingClientRect();
    const litterRect = litter.getBoundingClientRect();

    // Координаты относительно контейнера
    const containerRect = tree.getBoundingClientRect();

    const fatherX = fatherRect.left + fatherRect.width / 2 - containerRect.left;
    const fatherY = fatherRect.bottom - containerRect.top;

    const motherX = motherRect.left + motherRect.width / 2 - containerRect.left;
    const motherY = motherRect.bottom - containerRect.top;

    const litterX = litterRect.left + litterRect.width / 2 - containerRect.left;
    const litterY = litterRect.top - containerRect.top;

    // Функция для создания стрелки
    function createArrow(x1, y1, x2, y2) {
      const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
      line.setAttribute('x1', x1);
      line.setAttribute('y1', y1);
      line.setAttribute('x2', x2);
      line.setAttribute('y2', y2);
      line.setAttribute('stroke', '#444');
      line.setAttribute('stroke-width', '2');
      line.setAttribute('marker-end', 'url(#arrowhead)');
      return line;
    }

    // Определяем маркер стрелки
    const defs = document.createElementNS("http://www.w3.org/2000/svg", "defs");
    const marker = document.createElementNS("http://www.w3.org/2000/svg", "marker");
    marker.setAttribute('id', 'arrowhead');
    marker.setAttribute('markerWidth', '10');
    marker.setAttribute('markerHeight', '7');
    marker.setAttribute('refX', '0');
    marker.setAttribute('refY', '3.5');
    marker.setAttribute('orient', 'auto');

    const polygon = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
    polygon.setAttribute('points', '0 0, 10 3.5, 0 7');
    polygon.setAttribute('fill', '#444');
    marker.appendChild(polygon);
    defs.appendChild(marker);
    svg.appendChild(defs);

    // Добавляем линии-стрелки
    svg.appendChild(createArrow(fatherX, fatherY, litterX, litterY));
    svg.appendChild(createArrow(motherX, motherY, litterX, litterY));
  }

  window.addEventListener('resize', drawArrows);
  window.addEventListener('load', drawArrows);
</script>

</body>
</html>
